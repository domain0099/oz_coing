<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <title>Admin Page</title>
  <style>
    /* 다크 모드 스타일 */
    .dark-mode {
      background-color: #121212;
      color: white;
    }
    .dark-mode table {
      background-color: #1e1e1e;
    }
  </style>
</head>
<body>
  <div class="container mt-3">
    <div class="d-flex justify-content-between align-items-center">
      <h3 class="mt-5 mb-3">신규 등록 상품</h3>
      <div>
        <button class="btn btn-secondary me-2" onclick="toggleDarkMode()">🌙 다크 모드</button>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#signupModal">회원가입</button>
      </div>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-3">
      <span id="currentDateTime"></span>
    </div>

    <!-- 필터링 폼 -->
    <form class="row row-cols-lg-auto g-3 align-items-center">
      <div class="col-12">
        <select class="form-select" id="categorySelect" onchange="filterProducts()">
          <option value="all">전체</option>
          <option value="상의">상의</option>
          <option value="하의">하의</option>
          <option value="신발">신발</option>
          <option value="패션잡화">패션잡화</option>
        </select>
      </div>
      <div class="col-3">
        <input type="text" class="form-control" id="searchInput" placeholder="상품명 검색" onkeyup="filterProducts()">
      </div>
    </form>

    <!-- 제품 리스트 테이블 -->
    <div class="container mt-3">
      <table class="table table-sm">
        <thead>
          <tr>
            <th>상품 코드</th>
            <th>카테고리</th>
            <th>브랜드</th>
            <th>상품명</th>
            <th>가격</th>
          </tr>
        </thead>
        <tbody id="product_data_Table">
        </tbody>
      </table>
    </div>

    <!-- 페이지 네이션 -->
    <nav>
      <ul class="pagination justify-content-center" id="pagination"></ul>
    </nav>
  </div>

  <!-- 회원가입 모달 -->
  <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="signupModalLabel">회원가입</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="signupForm">
            <div class="mb-3">
              <label class="form-label">이름</label>
              <input type="text" class="form-control" id="name" required>
            </div>
            <div class="mb-3">
              <label class="form-label">주민등록번호</label>
              <div class="d-flex">
                <input type="text" class="form-control me-2" id="ssnFront" placeholder="앞자리 (6자리)" maxlength="6" required>
                <input type="password" class="form-control" id="ssnBack" placeholder="뒷자리 (7자리)" maxlength="7" required>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">성별</label><br>
              <input type="radio" name="gender" value="남성" required> 남성
              <input type="radio" name="gender" value="여성"> 여성
            </div>
            <div class="mb-3">
              <label class="form-label">아이디</label>
              <input type="text" class="form-control" id="username" required>
            </div>
            <div class="mb-3">
              <label class="form-label">비밀번호</label>
              <input type="password" class="form-control" id="password" required>
            </div>
            <div class="mb-3">
              <label class="form-label">비밀번호 확인</label>
              <input type="password" class="form-control" id="confirmPassword" required>
            </div>
            <div class="mb-3">
              <label class="form-label">이메일</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            <button type="submit" class="btn btn-success">회원가입</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    const product_data = [
      { code: "P001", category: "상의", brand: 'Supreme', product: '슈프림 박스로고 후드티', price: '390,000' },
      { code: "P002", category: "하의", brand: 'DIESEL', product: '디젤 트랙 팬츠', price: '188,000' },
      { code: "P003", category: "신발", brand: 'Nike', product: '에어포스 1', price: '137,000' },
      { code: "P004", category: "패션잡화", brand: 'Music&Goods', product: '빵빵이 키링', price: '29,000' },
      { code: "P005", category: "상의", brand: 'Nike', product: '나이키 스우시 맨투맨', price: '89,000' },
      { code: "P006", category: "하의", brand: 'Adidas', product: '아디다스 조거 팬츠', price: '78,000' },
      { code: "P007", category: "신발", brand: 'New Balance', product: '뉴발란스 530', price: '139,000' },
      { code: "P008", category: "패션잡화", brand: 'GUCCI', product: '구찌 카드지갑', price: '490,000' }
    ];

    let filteredData = [...product_data];
    const itemsPerPage = 3;
    let currentPage = 1;

    function loadTableData(page = 1) {
      const tableBody = document.getElementById("product_data_Table");
      tableBody.innerHTML = "";
      const startIndex = (page - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const paginatedData = filteredData.slice(startIndex, endIndex);

      paginatedData.forEach((item) => {
        const row = tableBody.insertRow();
        row.insertCell(0).textContent = item.code;
        row.insertCell(1).textContent = item.category;
        row.insertCell(2).textContent = item.brand;
        row.insertCell(3).textContent = item.product;
        row.insertCell(4).textContent = item.price;
      });

      setupPagination(filteredData, page);
    }

    function setupPagination(data, page) {
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = "";
      const pageCount = Math.ceil(data.length / itemsPerPage);

      for (let i = 1; i <= pageCount; i++) {
        const li = document.createElement('li');
        li.classList.add('page-item');
        if (i === page) li.classList.add('active');

        const link = document.createElement('a');
        link.classList.add('page-link');
        link.innerText = i;
        link.href = "#";
        link.onclick = (e) => {
          e.preventDefault();
          currentPage = i;
          loadTableData(currentPage);
        };

        li.appendChild(link);
        pagination.appendChild(li);
      }
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }
    
    document.getElementById("signupForm").addEventListener("submit", function(event) {
  event.preventDefault(); // 기본 제출 동작 막기

  // 입력된 데이터 가져오기
  const name = document.getElementById("name").value;
  const ssnFront = document.getElementById("ssnFront").value;
  const ssnBack = document.getElementById("ssnBack").value;
  const gender = document.querySelector('input[name="gender"]:checked')?.value;
  const username = document.getElementById("username").value;
  const password = document.getElementById("password").value;
  const confirmPassword = document.getElementById("confirmPassword").value;
  const email = document.getElementById("email").value;

  // 비밀번호 & 비밀번호 확인 체크
  if (password !== confirmPassword) {
    alert("비밀번호가 일치하지 않습니다. 다시 입력해주세요.");
    return;
  }

  // 회원가입 정보 확인 메시지
  const message = `
    🎉 회원가입이 완료되었습니다!
    --------------------------
    📛 이름: ${name}
    🔢 주민등록번호: ${ssnFront}-*******
    🏳 성별: ${gender ? gender : "미선택"}
    👤 아이디: ${username}
    🔒 비밀번호: ********
    📧 이메일: ${email}
  `;

  alert(message); // 입력값 확인 알림

  // 폼 초기화
  document.getElementById("signupForm").reset();

  // 회원가입 모달 닫기
  let signupModal = bootstrap.Modal.getInstance(document.getElementById('signupModal'));
  signupModal.hide();
});

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
  }

  // 상품 검색 기능
  function filterProducts() {
    const searchText = document.getElementById("searchInput").value.toLowerCase();
    const category = document.getElementById("categorySelect").value;

    // 필터링 적용: 카테고리 + 검색어 반영
    filteredData = product_data.filter(item => {
      const matchesCategory = category === "all" || item.category === category;
      const matchesSearch = item.product.toLowerCase().includes(searchText);
      return matchesCategory && matchesSearch;
    });

    // 필터링 후 첫 페이지로 이동
    currentPage = 1;
    loadTableData(currentPage);
  }



    loadTableData();
    
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>